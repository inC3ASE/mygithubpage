// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("anyvite.com-invitation-en",function(e){return!0},function(e){var t=Scanner.fromMessage(e);if(t.setLocale("en_US"),t.getSpan().nextText("Invitation Details").nextText("RSVP").nextText("Date & Time").nextText("Location").exists()){var n,a,i,r,o,s,p,m,c,l,d,x;if(a=/http:\/\/email\.mail\.anyvite\.com\/c\/(\w+)/.exec(e.html),a=a?a[1]:null,n=t.getSpan().nextText("View the Invitation").parentTag("td3").tagContents(),x=n.innerCapture(/(.*) has invited you to/,1),not(x)&&(x=n.innerCapture(/(.*) would like to remind you/,1)),not(x)&&(x=n.innerCapture(/hosted by (.*?)\./,1)),not(x)){var v=e.from.split("<")[0].trim();/anyvite/i.test(v)||(x=v)}switch(n=t.getSpan().nextText("Invitation Details").nextText("RSVP").nextTag("td3").tagContents(),r=n.innerCapture(/($<name>.*)\n($<description>[^]*)\s+\[table4/),s=r?r.$name:null,p=r?r.$description.trim():null,o=t.getSpan().innerCapture(/View the Invitation <(http.*)>/,1),l=n.innerText("Date & Time").nextDate(),n=n.innerText("Date & Time").nextText("Location").nextTag("td4").tagContents(),d=getFuzzyAddress(n),m=n.innerCapture(/($<name>.*)(?:\n($<address>[^]*)\s+Get Map & Directions)?/),m&&(not(d)?d=t.getDetachedSpan(""+m.$name).trim():startsWith(""+d,""+m.$name)||(c=m.$name)),n=t.getSpan().innerCapture(/\s+Your Response:\s+([^\s]*)\s+/,1),n.getString().toLowerCase()){case"yes":i="Confirmed";break;case"no":i="Cancelled";break;case"maybe":i="Hold";break;default:i="Pending"}if(ASSERT(s,l,d))return[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",reservationStatus:"http://schema.org/Reservation"+i,reservationId:a,reservationFor:{url:o,"@type":"http://schema.org/SocialEvent",name:s,startDate:l,location:valid(c)?{"@type":"http://schema.org/Place",name:c,address:d}:d,description:p},appleInvitedBy:x}]}},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/1023/1024/1025","SG7d64a81f")]);
